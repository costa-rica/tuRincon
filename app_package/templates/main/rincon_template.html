{% extends "_layout.html" %}
{% block main %}
<form method="POST" id="form_1"></form>
<form method="POST" id="form_modal_comment" ></form>
<form method="POST" id="form_delete_post" ></form>
<form method="POST" id="form_delete_comment" ></form>


<section class="main">
  <div class="rincon_page">

    <div class="rincon_sub">

      {% for post in rincon_posts %}
      <div class="rincon_post_card_super">

        <div class="rincon_post_card">

          <div class="post_and_engagement">

            <div class="post">

              <div class="date_div">
                <div class="date_div_sub">
                  {{ post.date }}
                </div>
              </div>
              
              <div class="username_div">
                <div class="username_div_sub">
                  {{post.username}}
                </div>
              </div>
              
              <div class="post_text_div">
                <div class="post_text_div_sub">
                  {{post.text}}
                </div>
              </div>

              {{ post.image_exists }}
              {% if post.image_exists %}
              <div class="img_div">
                <div class="img_div_sub">
                  <img class="img_class" alt=""
                  src="{{ url_for('static', filename= post.image_name_and_path) }}"/>
                </div>
              </div>
              {% endif %}
              

            
            </div><!-- post -->

            <div class="line_break_div">
              <hr>
            </div>

            <div class="post_engagement">
              <div class="post_engagement_sub">

                <div class="post_engagement_sub_left">
                  {% if post.delete_post_permission %}
                    <div class="delete_btn_div">
                      <button type="submit" name="btn_delete_post" value="{{ post.post_id }}" 
                      form="form_delete_post">Delete</button>
                    </div>
                  {% endif %}
                </div><!-- post_engagement_sub_left -->


                <div class="post_engagement_sub_right">

                  <div class="comment_btn_div">
                    <button type="button" class="btn btn-primary"
                      data-bs-toggle="modal" data-bs-target="#commentModal" data-bs-whatever="{{post.post_id}}">
                      comment
                    </button>
                  </div>

  
                  <img class="thumbs_up_icon" alt=""
                  src="{{ url_for('static', filename= 'images/thumbs-up-16-512.png') }}">
                </div><!-- post_engagement_sub_right -->

              </div><!-- post_engagement_sub -->
            
            </div><!-- post_engagement -->

            <div class="line_break_div">
              <hr>
            </div>
            <div class="show_comments">


              {% for comment in post.comments %}
              <div class="show_comments_sub">


                <div class="comment_card">
                  {% for key, item in comment.items() %}
                    
                      {% if key == 'date' %}
                      <div class="date_div">
                        <div class="comments_date">
                          {{ item }}
                        </div>
                      </div>
                      {% endif %}

                      {% if key == 'username' %}
                      <div class="username_div ">
                        <div class="comments_username">
                          {{item}}
                        </div>
                      </div>
                      {% endif %}

                      {% if key == 'text' %}
                      <div class="post_text_div">
                        <div class="post_text_div_sub">
                          {{item}}
                        </div>
                      </div>
                      {% endif %}

                      {% if key == 'delete_comment_permission' %}

                        {% if item %}
                        <div class="delete_comment_div">
                          <div class="delete_comment_div_sub">
                            <button type="submit" name="btn_delete_comment" value="{{ comment.comment_id }}" 
                             form="form_delete_comment">Delete</button>
                          </div>
                          
                        </div>
                        
                        {% endif %}

                      {% endif %}

                  {% endfor %}


                </div>
              
              




              </div><!-- show_comment_sub-->
              {% endfor %}

            </div><!-- show_comments -->

          </div><!-- post_and_engagement -->

        </div><!-- rincon_post_card -->
        
      </div><!-- rincon_post_card_super -->

  <!-- Modal  -->
  <div class="modal" tabindex="-1" role="dialog" id="commentModal">
    
    {% include "modals/comment.html" %}

  </div>


      {% endfor %}

    </div><!--rincon_sub-->

  </div><!--rincon_page-->

</section>









{% endblock %}